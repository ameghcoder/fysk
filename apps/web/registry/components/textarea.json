{
    "$schema": "https://ui.shadcn.com/schema/registry-item.json",
    "name": "textarea",
    "title": "Textarea",
    "type": "registry:ui",
    "description": "An advance textarea component with auto-size and header/footer support, built on top of Radix UI.",
    "dependencies": [
        "class-variance-authority"
    ],
    "registryDependencies": [
        "utils"
    ],
    "files": [
        {
            "path": "fysk/textarea.tsx",
            "type": "registry:ui",
            "content": "\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst textareaVariants = cva(\r\n    \"flex w-full rounded-md px-6 py-4 text-base transition-all placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 min-h-[80px]\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default: \"border border-border/50 bg-background focus-within:ring-2 focus-within:ring-ring/30\",\r\n                filled: \"border-transparent bg-muted focus-within:bg-background border-border/50 focus-within:ring-2 focus-within:ring-ring/30\",\r\n                double: \"border-2 border-border bg-transparent focus-within:border-border focus-within:ring-2 focus-within:ring-ring/30\",\r\n                ghost: \"border-transparent bg-transparent hover:bg-muted focus-within:bg-background border-border focus-within:ring-2 focus-within:ring-ring/30\",\r\n                deep: \"border border-border/50 bg-muted/20 shadow-[inset_0px_-1px_2px_0px_#00000052] focus-within:bg-background focus-within:ring-2 focus-within:ring-ring/30\",\r\n            },\r\n            glow: {\r\n                true: \"shadow-[0_0_15px_-5px_rgba(var(--primary-rgb,0,0,0),0.3)] border-primary/30\",\r\n                false: \"\"\r\n            }\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            glow: false,\r\n        },\r\n    }\r\n)\r\n\r\nexport interface TextareaProps\r\n    extends React.TextareaHTMLAttributes<HTMLTextAreaElement>,\r\n    VariantProps<typeof textareaVariants> {\r\n    /**\r\n     * Automatically adjust the height of the textarea based on content.\r\n     */\r\n    autoSize?: boolean\r\n    /**\r\n     * Maximum height when autoSize is enabled.\r\n     */\r\n    maxHeight?: number\r\n    /**\r\n     * Optional header content (e.g., info pills, toolbar).\r\n     */\r\n    header?: React.ReactNode\r\n    /**\r\n     * Optional footer content (e.g., send button, character count).\r\n     */\r\n    footer?: React.ReactNode\r\n}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n    ({ className, variant, glow, autoSize = false, maxHeight, header, footer, ...props }, ref) => {\r\n        const internalRef = React.useRef<HTMLTextAreaElement>(null)\r\n\r\n        // Merge refs: one for internal logic (autoSize) and one for parent (forwardRef)\r\n        const combinedRef = React.useCallback((node: HTMLTextAreaElement) => {\r\n            internalRef.current = node\r\n            if (typeof ref === \"function\") {\r\n                ref(node)\r\n            } else if (ref) {\r\n                (ref as React.RefObject<HTMLTextAreaElement | null>).current = node\r\n            }\r\n        }, [ref])\r\n\r\n        const adjustHeight = React.useCallback(() => {\r\n            if (autoSize && internalRef.current) {\r\n                internalRef.current.style.height = 'auto'\r\n                const nextHeight = internalRef.current.scrollHeight\r\n                if (maxHeight && nextHeight > maxHeight) {\r\n                    internalRef.current.style.height = `${maxHeight}px`\r\n                    internalRef.current.style.overflowY = 'auto'\r\n                } else {\r\n                    internalRef.current.style.height = `${nextHeight}px`\r\n                    internalRef.current.style.overflowY = 'hidden'\r\n                }\r\n            }\r\n        }, [autoSize, maxHeight])\r\n\r\n        React.useEffect(() => {\r\n            adjustHeight()\r\n        }, [adjustHeight, props.value])\r\n\r\n        const handleInput = (e: React.FormEvent<HTMLTextAreaElement>) => {\r\n            adjustHeight()\r\n            props.onInput?.(e)\r\n        }\r\n\r\n        const textareaElement = (\r\n            <textarea\r\n                className={cn(\r\n                    \"flex w-full bg-transparent text-base placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 fysk-textarea-scrollbar\",\r\n                    autoSize && \"resize-none overflow-hidden\",\r\n                    !(header || footer) && \"min-h-[80px]\",\r\n                    (header || footer) && \"px-0 py-0\",\r\n                    footer && \"resize-none\",\r\n                    className\r\n                )}\r\n                ref={combinedRef}\r\n                onInput={handleInput}\r\n                {...props}\r\n            />\r\n        )\r\n\r\n        // If no header/footer, return standard textarea with styling\r\n        if (!header && !footer) {\r\n            return (\r\n                <div className={cn(\r\n                    textareaVariants({ variant, glow }),\r\n                    \"flex flex-col\"\r\n                )}>\r\n                    {textareaElement}\r\n                    <style dangerouslySetInnerHTML={{\r\n                        __html: `\r\n                        .fysk-textarea-scrollbar::-webkit-scrollbar {\r\n                            width: 6px;\r\n                        }\r\n                        .fysk-textarea-scrollbar::-webkit-scrollbar-track {\r\n                            background: transparent;\r\n                        }\r\n                        .fysk-textarea-scrollbar::-webkit-scrollbar-thumb {\r\n                            background: hsl(var(--border) / 0.5);\r\n                            border-radius: 10px;\r\n                        }\r\n                        .fysk-textarea-scrollbar::-webkit-scrollbar-thumb:hover {\r\n                            background: hsl(var(--border));\r\n                        }\r\n                    `}} />\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className={cn(\r\n                \"relative flex flex-col w-full transition-all\",\r\n                textareaVariants({ variant, glow }),\r\n                \"p-0\" // Reset padding since we have internal structural elements\r\n            )}>\r\n                {header && (\r\n                    <div className=\"px-3 pt-2 pb-1 border-b border-border/5\">\r\n                        {header}\r\n                    </div>\r\n                )}\r\n                <div className=\"px-3 py-2 flex flex-col flex-1 min-h-[40px]\">\r\n                    {textareaElement}\r\n                </div>\r\n                {footer && (\r\n                    <div className=\"px-3 pb-2 pt-1 mt-auto border-t border-border/5\">\r\n                        {footer}\r\n                    </div>\r\n                )}\r\n                <style dangerouslySetInnerHTML={{\r\n                    __html: `\r\n                    .fysk-textarea-scrollbar::-webkit-scrollbar {\r\n                        width: 6px;\r\n                    }\r\n                    .fysk-textarea-scrollbar::-webkit-scrollbar-track {\r\n                        background: transparent;\r\n                    }\r\n                    .fysk-textarea-scrollbar::-webkit-scrollbar-thumb {\r\n                        background: hsl(var(--border) / 0.5);\r\n                        border-radius: 10px;\r\n                    }\r\n                    .fysk-textarea-scrollbar::-webkit-scrollbar-thumb:hover {\r\n                        background: hsl(var(--border));\r\n                    }\r\n                `}} />\r\n            </div>\r\n        )\r\n    }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea, textareaVariants }\r\n"
        }
    ]
}