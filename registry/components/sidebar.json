{
    "$schema": "https://ui.shadcn.com/schema/registry-item.json",
    "name": "sidebar",
    "title": "Sidebar",
    "type": "registry:ui",
    "description": "Sidebar component that extends the Dialog component to display content that complements the main screen.",
    "dependencies": [
        "@radix-ui/react-slot",
        "class-variance-authority",
        "lucide-react",
        "framer-motion"
    ],
    "registryDependencies": [
        "utils"
    ],
    "files": [
        {
            "path": "fysk/sidebar.tsx",
            "type": "registry:ui",
            "content": "\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { ChevronRight, PanelLeft, X } from \"lucide-react\"\r\nimport { motion, AnimatePresence, type HTMLMotionProps } from \"framer-motion\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\n// --- Configuration ---\r\nconst SIDEBAR_WIDTH = \"260px\"\r\nconst SIDEBAR_WIDTH_COLLAPSED = \"64px\"\r\n\r\n// --- Types ---\r\ntype SidebarStyleMode = \"fixed\" | \"sticky\" | \"floating\" | \"inset\"\r\ntype SidebarCollapsibleMode = \"icon\" | \"none\" // \"icon\" = collapses to icons, \"none\" = always expanded\r\n\r\ninterface SidebarContextValue {\r\n    isOpen: boolean\r\n    toggle: () => void\r\n    styleMode: SidebarStyleMode\r\n    collapsible: SidebarCollapsibleMode\r\n    isMobile: boolean\r\n    setOpen: (open: boolean) => void\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContextValue | null>(null)\r\n\r\nexport function useSidebar() {\r\n    const context = React.useContext(SidebarContext)\r\n    if (!context) throw new Error(\"useSidebar must be used within SidebarProvider\")\r\n    return context\r\n}\r\n\r\n// --- 1. Provider ---\r\nexport function SidebarProvider(props: {\r\n    children: React.ReactNode\r\n    defaultOpen?: boolean\r\n    styleMode?: SidebarStyleMode\r\n    collapsible?: SidebarCollapsibleMode\r\n    className?: string\r\n} & React.HTMLAttributes<HTMLDivElement>) {\r\n    const {\r\n        children,\r\n        defaultOpen = true,\r\n        styleMode = \"fixed\",\r\n        collapsible = \"icon\",\r\n        className,\r\n        ...remainingProps\r\n    } = props\r\n\r\n    const [isOpen, setOpen] = React.useState(defaultOpen)\r\n    const [isMobile, setIsMobile] = React.useState(false)\r\n\r\n    React.useEffect(() => {\r\n        const checkMobile = () => {\r\n            const isSmall = window.innerWidth < 768\r\n            setIsMobile(isSmall)\r\n            if (isSmall) setOpen(false)\r\n        }\r\n        checkMobile()\r\n        window.addEventListener(\"resize\", checkMobile)\r\n        return () => window.removeEventListener(\"resize\", checkMobile)\r\n    }, [])\r\n\r\n    const toggle = React.useCallback(() => {\r\n        if (!isMobile && collapsible === \"none\") return;\r\n        setOpen((prev) => !prev)\r\n    }, [collapsible, isMobile])\r\n\r\n    return (\r\n        <SidebarContext.Provider value={{ isOpen, setOpen, toggle, styleMode, collapsible, isMobile }}>\r\n            <div\r\n                className={cn(\r\n                    \"flex w-full bg-background transition-colors\",\r\n                    (styleMode === \"fixed\" || styleMode === \"sticky\") ? \"min-h-screen\" : \"min-h-full\",\r\n                    className\r\n                )}\r\n                data-style-mode={styleMode}\r\n                data-collapsible={collapsible}\r\n                {...remainingProps}\r\n            >\r\n                {children}\r\n            </div>\r\n        </SidebarContext.Provider>\r\n    )\r\n}\r\n\r\n// --- 2. The Main Sidebar ---\r\nconst sidebarVariants = cva(\r\n    \"group z-30 flex flex-col bg-sidebar border-r border-sidebar-border transition-[width,transform] duration-300 ease-[cubic-bezier(0.25,1,0.5,1)]\",\r\n    {\r\n        variants: {\r\n            mode: {\r\n                fixed: \"fixed left-0 top-0 h-screen\",\r\n                sticky: \"sticky top-0 h-screen\",\r\n                floating: \"fixed left-4 top-4 h-[calc(100vh-2rem)] rounded-2xl border shadow-xl bg-sidebar/80 backdrop-blur-md\",\r\n                inset: \"relative h-full\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            mode: \"fixed\",\r\n        },\r\n    }\r\n)\r\n\r\nexport const Sidebar = React.forwardRef<\r\n    HTMLElement,\r\n    HTMLMotionProps<\"aside\"> & {\r\n        children?: React.ReactNode\r\n        styleMode?: SidebarStyleMode\r\n        collapsible?: SidebarCollapsibleMode\r\n    } & VariantProps<typeof sidebarVariants>\r\n>(({ className, children, styleMode: styleModeOverride, collapsible: collapsibleOverride, ...props }, ref) => {\r\n    const { isOpen, styleMode: contextStyleMode, collapsible: contextCollapsible, isMobile, setOpen } = useSidebar()\r\n\r\n    const styleMode = styleModeOverride || contextStyleMode\r\n    const collapsible = collapsibleOverride || contextCollapsible\r\n\r\n    // Logic: Mobile always uses full width when open.\r\n    // Otherwise, check isOpen state.\r\n    const shouldBeExpanded = isMobile ? isOpen : (collapsible === \"none\" ? true : isOpen)\r\n    const width = shouldBeExpanded ? SIDEBAR_WIDTH : (isMobile ? \"0px\" : SIDEBAR_WIDTH_COLLAPSED)\r\n\r\n    return (\r\n        <>\r\n            {/* Spacer - Hidden on Mobile or if sidebar is floating */}\r\n            {styleMode === \"fixed\" && !isMobile && (\r\n                <div\r\n                    className=\"shrink-0 transition-[width] duration-300 ease-in-out\"\r\n                    style={{ width: width }}\r\n                />\r\n            )}\r\n\r\n            <motion.aside\r\n                ref={ref}\r\n                initial={false}\r\n                animate={{\r\n                    width: width,\r\n                    // Mobile: Slide out when closed, otherwise stay at 0\r\n                    x: isMobile && !isOpen ? -parseInt(SIDEBAR_WIDTH) : 0\r\n                }}\r\n                className={cn(\r\n                    sidebarVariants({ mode: styleMode }),\r\n                    \"overflow-hidden\",\r\n                    className\r\n                )}\r\n                {...props}\r\n            >\r\n                {/* Mobile Close Button */}\r\n                {isMobile && (\r\n                    <button\r\n                        onClick={() => setOpen(false)}\r\n                        className=\"absolute z-50 right-4 top-4 p-2 rounded-full bg-sidebar-accent md:hidden\"\r\n                    >\r\n                        <X className=\"size-4\" />\r\n                    </button>\r\n                )}\r\n\r\n                <div className=\"flex h-full w-full flex-col overflow-y-auto overflow-x-hidden custom-sidebar-scroll\">\r\n                    {children}\r\n                </div>\r\n            </motion.aside>\r\n\r\n            {/* Mobile Backdrop Overlay */}\r\n            <AnimatePresence>\r\n                {isMobile && isOpen && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-20 bg-background/40 backdrop-blur-sm md:hidden\"\r\n                        onClick={() => setOpen(false)}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            <style dangerouslySetInnerHTML={{\r\n                __html: `\r\n                .custom-sidebar-scroll::-webkit-scrollbar { width: 4px; }\r\n                .custom-sidebar-scroll::-webkit-scrollbar-track { background: transparent; }\r\n                .custom-sidebar-scroll::-webkit-scrollbar-thumb { background: transparent; border-radius: 10px; }\r\n                .custom-sidebar-scroll:hover::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); }\r\n                .dark .custom-sidebar-scroll:hover::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); }\r\n            `}} />\r\n        </>\r\n    )\r\n})\r\nSidebar.displayName = \"Sidebar\"\r\n\r\n// --- 3. Header, Footer, Content, Groups ---\r\n// (These remain the same as previous step, kept here for completeness if needed)\r\nexport const SidebarHeader = ({ className, children }: React.ComponentProps<\"div\">) => (\r\n    <div className={cn(\"flex items-center px-4 py-4 h-16 shrink-0 border-b border-sidebar-border/50\", className)}>\r\n        {children}\r\n    </div>\r\n)\r\nexport const SidebarFooter = ({ className, children }: React.ComponentProps<\"div\">) => (\r\n    <div className={cn(\"mt-auto px-4 py-4 border-t border-sidebar-border/50\", className)}>\r\n        {children}\r\n    </div>\r\n)\r\nexport const SidebarContent = ({ className, children }: React.ComponentProps<\"div\">) => (\r\n    <div className={cn(\"flex-1 px-3 py-3 space-y-1\", className)}>\r\n        {children}\r\n    </div>\r\n)\r\nexport const SidebarGroup = ({ className, children }: React.ComponentProps<\"div\">) => (\r\n    <div className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}>{children}</div>\r\n)\r\nexport const SidebarGroupLabel = ({ className, children }: React.ComponentProps<\"div\">) => {\r\n    const { isOpen, collapsible } = useSidebar()\r\n    const showLabel = collapsible === \"none\" || isOpen\r\n    return (\r\n        <AnimatePresence>\r\n            {showLabel && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, height: 0 }}\r\n                    animate={{ opacity: 1, height: \"auto\" }}\r\n                    exit={{ opacity: 0, height: 0 }}\r\n                    className={cn(\"px-2 py-1.5 text-xs font-semibold text-muted-foreground/60 uppercase tracking-widest\", className)}\r\n                >\r\n                    {children}\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    )\r\n}\r\nexport const SidebarGroupContent = ({ className, children }: React.ComponentProps<\"div\">) => (\r\n    <div className={cn(\"w-full text-sm\", className)}>{children}</div>\r\n)\r\n\r\n// --- 4. Interactive Items (UPDATED LOGIC) ---\r\nexport const SidebarItem = React.forwardRef<\r\n    HTMLDivElement,\r\n    {\r\n        icon?: React.ReactNode\r\n        label: string\r\n        active?: boolean\r\n        asChild?: boolean\r\n        subMenu?: React.ReactNode\r\n        onClick?: () => void\r\n    } & React.ComponentProps<\"div\">\r\n>(({ icon, label, active, asChild, subMenu, children, onClick, className, ...props }, ref) => {\r\n    const { isOpen, setOpen, collapsible } = useSidebar()\r\n    const [isSubOpen, setSubOpen] = React.useState(false)\r\n\r\n    // Sub-menu logic: \r\n    // If subMenu prop is provided, it's explicitly a collapsible parent.\r\n    // If asChild is false, children acts as the subMenu (backwards compatibility).\r\n    const hasSubMenu = !!subMenu || (!asChild && !!children)\r\n    const isCollapsed = collapsible !== \"none\" && !isOpen\r\n\r\n    const Comp = asChild ? Slot : \"div\"\r\n\r\n    const handleClick = (e: React.MouseEvent) => {\r\n        if (hasSubMenu) {\r\n            if (isCollapsed) setOpen(true)\r\n            setSubOpen(!isSubOpen)\r\n        } else {\r\n            onClick?.()\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div ref={ref} className=\"select-none\">\r\n            <Comp\r\n                onClick={handleClick}\r\n                className={cn(\r\n                    \"group flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer\",\r\n                    \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n                    active ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"text-muted-foreground\",\r\n                    className\r\n                )}\r\n                {...props}\r\n            >\r\n                {asChild ? children : (\r\n                    <>\r\n                        {/* 1. Logic: Show Icon OR First Letter fallback */}\r\n                        {(icon || (isCollapsed && label)) && (\r\n                            <span className={cn(\"shrink-0 flex items-center justify-center size-5\", !isOpen && \"mx-auto\")}>\r\n                                {icon ? (\r\n                                    icon\r\n                                ) : isCollapsed ? (\r\n                                    <span className=\"text-xs font-bold opacity-70 border rounded size-5 flex items-center justify-center bg-background/50\">\r\n                                        {label.charAt(0).toUpperCase()}\r\n                                    </span>\r\n                                ) : null}\r\n                            </span>\r\n                        )}\r\n\r\n                        {/* 2. Label: Only visible when expanded */}\r\n                        <AnimatePresence mode=\"popLayout\">\r\n                            {!isCollapsed && (\r\n                                <motion.span\r\n                                    initial={{ opacity: 0, width: 0 }}\r\n                                    animate={{ opacity: 1, width: \"auto\" }}\r\n                                    exit={{ opacity: 0, width: 0 }}\r\n                                    className=\"flex-1 truncate\"\r\n                                >\r\n                                    {label}\r\n                                </motion.span>\r\n                            )}\r\n                        </AnimatePresence>\r\n\r\n                        {/* 3. Chevron: Only visible when expanded and has sub-menu */}\r\n                        {!isCollapsed && hasSubMenu && (\r\n                            <ChevronRight\r\n                                className={cn(\"size-4 opacity-50 transition-transform\", isSubOpen && \"rotate-90\")}\r\n                            />\r\n                        )}\r\n                    </>\r\n                )}\r\n            </Comp>\r\n\r\n            {/* 4. Sub-Menu Content */}\r\n            <AnimatePresence>\r\n                {!isCollapsed && isSubOpen && hasSubMenu && (\r\n                    <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: \"auto\", opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        className=\"overflow-hidden ml-4 border-l border-sidebar-border/40 pl-2 mt-1 space-y-1\"\r\n                    >\r\n                        {subMenu || (!asChild && children)}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    )\r\n})\r\nSidebarItem.displayName = \"SidebarItem\"\r\n\r\n// --- 5. Triggers & Insets ---\r\nexport const SidebarTrigger = ({ className, ...props }: React.ComponentProps<\"button\">) => {\r\n    const { toggle, collapsible, isMobile } = useSidebar()\r\n\r\n    // If on desktop AND collapsible is 'none', hide the trigger.\r\n    // BUT if on mobile, ALWAYS show the trigger so the user can open the nav.\r\n    if (!isMobile && collapsible === \"none\") return null\r\n\r\n    return (\r\n        <button\r\n            onClick={toggle}\r\n            className={cn(\"p-2 rounded-md hover:bg-sidebar-accent transition-colors\", className)}\r\n            {...props}\r\n        >\r\n            <PanelLeft className=\"size-4\" />\r\n        </button>\r\n    )\r\n}\r\n\r\nexport const SidebarInset = ({ className, children, ...props }: React.ComponentProps<\"main\">) => {\r\n    return (\r\n        <main className={cn(\"flex-1 transition-all duration-300 w-full\", className)} {...props}>\r\n            {children}\r\n        </main>\r\n    )\r\n}"
        }
    ]
}